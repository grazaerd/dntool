#ifndef PAK_HPP
#define PAK_HPP

#include <array>
#include <cstddef>
#include <cstdint>
#include <vector>

namespace pak {

    // Official client pak struct
    // TODO fix struct for read and writing of paks
    
    inline constexpr auto HEADER_EMPTY_BYTES = 756;
    inline constexpr auto CONTENT_EMPTY_BYTES = 44;
    
    struct header {
      
        static constexpr std::array<std::uint8_t, 256> filesignature = {
            0x45, 0x79, 0x65, 0x64, 0x65, 0x6E, 0x74, 0x69, 0x74, 0x79, 0x47, 0x61, 0x6D, 0x65, 0x73, 0x20, 
            0x50, 0x61, 0x63, 0x6B, 0x69, 0x6E, 0x67, 0x20, 0x46, 0x69, 0x6C, 0x65, 0x20, 0x30, 0x2E, 0x31, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
        };
      
        std::uint32_t filecount = 0;
      
        std::uint32_t fileindex = 0;
      
        static constexpr std::uint32_t unknown = 11;
      
        std::array<const char, HEADER_EMPTY_BYTES> headerbytes {};
    
    };
    
    struct file_index_comp {
        
        std::vector<unsigned char> incompress {};
        
        std::size_t compressedsize = 0;
        
        unsigned char* compressedbuffer = nullptr;
        
        std::vector<char> pathemptybytes {};
        
        std::uint32_t filepos = 0;
        
        std::uint32_t filesize = 0;
        
        std::array<std::uint8_t, CONTENT_EMPTY_BYTES> emptybytes {};

    };

    struct file_index_decomp {
        
        char filepath[256] {};
        
        std::uint32_t rawsz = 0u;
        
        std::uint32_t decompsz = 0u;

        // same as rawsz value
        std::uint32_t compsz = 0u;

        std::uint32_t offset = 0u;

        char empty[44] {};
        
    };

}

#endif